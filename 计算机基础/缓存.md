1. 浏览器首次加载资源成功，浏览器返回200，并且把response的header一并缓存。（header中的date属性非常重要，用来计算第二次相同资源时当前时间和date的时间差）
2. 下一次加载资源时，首先要经过强缓存处理，cache-control的优先级最高。比如cache-control: no-cache，直接进入协商缓存步骤；如果cache-control: max-age=xxx，就回比较当前date和上一次返回200时的时间差，如果没有超过max-age，命中强缓存，不发请求，直接从本地缓存读取该文件（此处注意，如果没有cache-control，会取expires的值来对比是否过期），过期后会进入下一个阶段，协商缓存。
3. 协商缓存阶段，则向服务器发送header带有If-None-Match和If-Modified-Since的请求，服务器会比较Etag，如果相同，命中协商缓存，返回304，；如果不一致则代表有改动，直接返回新的资源文件，带上新的Etag值，并返回200。
4. 协商缓存的第二个重要字段是If-Modified-Since，如果客户端发送的If-Modified-Since的值跟服务器端获取的文件最近改动的时间一致，则命中协商缓存，返回304；不一致则返回新的Last-Modified和文件，并返回200。

### 页面渲染优化
* HTML文档结构层次尽量少，最好不深于六层；
* 脚本尽量后放，放在前即可；
* 少量首屏样式内联放在标签内；
* 样式结构层次尽量简单；
* 在脚本中尽量减少DOM操作，尽量缓存访问DOM的样式信息，避免过度触发回流；
* 减少通过JavaScript代码修改元素样式，尽量使用修改class名方式操作样式或动画；
* 动画尽量使用在绝对定位或固定定位的元素上；
* 隐藏在屏幕外，或在页面滚动时，尽量停止动画；
* 尽量缓存DOM查找，查找器尽量简洁；
* 涉及多域名的网站，可以开启域名预解析